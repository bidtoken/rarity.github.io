(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[528],{1646:function(t){t.exports=function(){"use strict";var t,e,s=1e3,n=6e4,a=36e5,i=864e5,o=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,r=31536e6,c=2592e6,l=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,d={years:r,months:c,days:i,hours:a,minutes:n,seconds:s,milliseconds:1,weeks:6048e5},h=function(t){return t instanceof w},u=function(t,e,s){return new w(t,s,e.$l)},m=function(t){return e.p(t)+"s"},f=function(t){return t<0},x=function(t){return f(t)?Math.ceil(t):Math.floor(t)},v=function(t){return Math.abs(t)},b=function(t,e){return t?f(t)?{negative:!0,format:""+v(t)+e}:{negative:!1,format:""+t+e}:{negative:!1,format:""}},w=function(){function f(t,e,s){var n=this;if(this.$d={},this.$l=s,void 0===t&&(this.$ms=0,this.parseFromMilliseconds()),e)return u(t*d[m(e)],this);if("number"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if("object"==typeof t)return Object.keys(t).forEach((function(e){n.$d[m(e)]=t[e]})),this.calMilliseconds(),this;if("string"==typeof t){var a=t.match(l);if(a){var i=a.slice(2).map((function(t){return null!=t?Number(t):0}));return this.$d.years=i[0],this.$d.months=i[1],this.$d.weeks=i[2],this.$d.days=i[3],this.$d.hours=i[4],this.$d.minutes=i[5],this.$d.seconds=i[6],this.calMilliseconds(),this}}return this}var v=f.prototype;return v.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(e,s){return e+(t.$d[s]||0)*d[s]}),0)},v.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=x(t/r),t%=r,this.$d.months=x(t/c),t%=c,this.$d.days=x(t/i),t%=i,this.$d.hours=x(t/a),t%=a,this.$d.minutes=x(t/n),t%=n,this.$d.seconds=x(t/s),t%=s,this.$d.milliseconds=t},v.toISOString=function(){var t=b(this.$d.years,"Y"),e=b(this.$d.months,"M"),s=+this.$d.days||0;this.$d.weeks&&(s+=7*this.$d.weeks);var n=b(s,"D"),a=b(this.$d.hours,"H"),i=b(this.$d.minutes,"M"),o=this.$d.seconds||0;this.$d.milliseconds&&(o+=this.$d.milliseconds/1e3);var r=b(o,"S"),c=t.negative||e.negative||n.negative||a.negative||i.negative||r.negative,l=a.format||i.format||r.format?"T":"",d=(c?"-":"")+"P"+t.format+e.format+n.format+l+a.format+i.format+r.format;return"P"===d||"-P"===d?"P0D":d},v.toJSON=function(){return this.toISOString()},v.format=function(t){var s=t||"YYYY-MM-DDTHH:mm:ss",n={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return s.replace(o,(function(t,e){return e||String(n[t])}))},v.as=function(t){return this.$ms/d[m(t)]},v.get=function(t){var e=this.$ms,s=m(t);return"milliseconds"===s?e%=1e3:e="weeks"===s?x(e/d[s]):this.$d[s],0===e?0:e},v.add=function(t,e,s){var n;return n=e?t*d[m(e)]:h(t)?t.$ms:u(t,this).$ms,u(this.$ms+n*(s?-1:1),this)},v.subtract=function(t,e){return this.add(t,e,!0)},v.locale=function(t){var e=this.clone();return e.$l=t,e},v.clone=function(){return u(this.$ms,this)},v.humanize=function(e){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},v.milliseconds=function(){return this.get("milliseconds")},v.asMilliseconds=function(){return this.as("milliseconds")},v.seconds=function(){return this.get("seconds")},v.asSeconds=function(){return this.as("seconds")},v.minutes=function(){return this.get("minutes")},v.asMinutes=function(){return this.as("minutes")},v.hours=function(){return this.get("hours")},v.asHours=function(){return this.as("hours")},v.days=function(){return this.get("days")},v.asDays=function(){return this.as("days")},v.weeks=function(){return this.get("weeks")},v.asWeeks=function(){return this.as("weeks")},v.months=function(){return this.get("months")},v.asMonths=function(){return this.as("months")},v.years=function(){return this.get("years")},v.asYears=function(){return this.as("years")},f}();return function(s,n,a){t=a,e=a().$utils(),a.duration=function(t,e){var s=a.locale();return u(t,{$l:s},e)},a.isDuration=h;var i=n.prototype.add,o=n.prototype.subtract;n.prototype.add=function(t,e){return h(t)&&(t=t.asMilliseconds()),i.bind(this)(t,e)},n.prototype.subtract=function(t,e){return h(t)&&(t=t.asMilliseconds()),o.bind(this)(t,e)}}}()},84463:function(t,e,s){"use strict";s(67294);var n=s(85893);e.Z=function(t){var e=t.className,s=t.value,a=t.onIncrement,i=t.onDecrement,o=t.backgroundColor,r=void 0===o?"bg-white dark:bg-dark-600 hover:bg-gray-principal dark:hover:bg-dark-400":o,c="absolute bg-black dark:bg-dark-100";return(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("button",{children:(0,n.jsxs)("div",{className:"relative ".concat(e," w-10 h-10 flex justify-center items-center text-regular text-black dark:text-dark-100"),onClick:i,children:[(0,n.jsx)("svg",{className:"mr-0.5 transform rotate-180",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M8 2H12V6H16V10H20V14H16V18H12V22H8V18H12V14H16V10H12V6H8V2Z",fill:"currentcolor"})}),(0,n.jsx)("div",{className:"".concat(c," h-1 top-0 left-1 right-1")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-1 left-0")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-1 right-0")}),(0,n.jsx)("div",{className:"".concat(c," w-1 top-2 bottom-2 left-0")}),(0,n.jsx)("div",{className:"".concat(c," w-1 top-2 bottom-2 right-0")}),(0,n.jsx)("div",{className:"".concat(c," h-1 bottom-0 left-1 right-1")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-0 right-0")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-0 left-0")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 bottom-0 right-0")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 bottom-0 left-0")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-1 left-2")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-1 right-2")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-2 left-1")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-2 right-1")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 bottom-1 left-2")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 bottom-1 right-2")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 bottom-2 left-1")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 bottom-2 right-1")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 top-1 right-0")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 top-1 right-1")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 bottom-1 right-0")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 bottom-1 right-1")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 top-1 left-0")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 top-0 left-1")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 top-1 left-1")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 bottom-1 left-0")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 bottom-0 left-1")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 bottom-1 left-1")})]})}),(0,n.jsx)("div",{className:"px-5 w-20 h-10 border-t-4 border-b-4 border-black dark:border-dark-100 text-regular flex justify-center items-center",children:s}),(0,n.jsx)("button",{children:(0,n.jsxs)("div",{className:"relative ".concat(e," w-10 h-10 flex justify-center items-center text-regular text-black dark:text-dark-100"),onClick:a,children:[(0,n.jsx)("svg",{className:"ml-0.5",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M8 2H12V6H16V10H20V14H16V18H12V22H8V18H12V14H16V10H12V6H8V2Z",fill:"currentcolor"})}),(0,n.jsx)("div",{className:"".concat(c," h-1 top-0 left-1 right-1")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-1 left-0")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-1 right-0")}),(0,n.jsx)("div",{className:"".concat(c," w-1 top-2 bottom-2 left-0")}),(0,n.jsx)("div",{className:"".concat(c," w-1 top-2 bottom-2 right-0")}),(0,n.jsx)("div",{className:"".concat(c," h-1 bottom-0 left-1 right-1")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-0 right-0")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-0 left-0")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 bottom-0 right-0")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 bottom-0 left-0")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-1 left-2")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-1 right-2")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-2 left-1")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 top-2 right-1")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 bottom-1 left-2")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 bottom-1 right-2")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 bottom-2 left-1")}),(0,n.jsx)("div",{className:"".concat(c," h-1 w-1 bottom-2 right-1")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 top-1 right-0")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 top-0 right-1")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 top-1 right-1")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 bottom-1 right-0")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 bottom-0 right-1")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 bottom-1 right-1")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 top-1 left-0")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 top-1 left-1")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 bottom-1 left-0")}),(0,n.jsx)("div",{className:"".concat(r," absolute h-1 w-1 bottom-1 left-1")})]})})]})}},33787:function(t,e,s){"use strict";s(67294);var n=s(85893);e.Z=function(t){var e=t.width,s=void 0===e?16:e,a=t.height,i=void 0===a?16:a,o=t.className,r=t.onClick;return(0,n.jsx)("svg",{onClick:r,width:s,height:i,className:o,viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("g",{children:(0,n.jsx)("path",{d:"M391.22 9.22c-21.755 67.887-29.008 99.75-52.25 146.218 2.776 2.15 5.5 4.42 8.124 6.843 23.768-21.825 42.788-47.49 51.937-85.5l18.158 4.376c-10.093 41.93-31.86 71.302-57.375 94.813 1.442 1.81 2.832 3.657 4.156 5.53 27.306-3.97 52.29-12.325 74.56-32.47l12.533 13.876c-23.42 21.182-49.982 31.05-76.938 35.875.75 1.56 1.477 3.138 2.156 4.72 53.284 5.685 96.878-3.05 122.408-44.094C431.28 144.456 480.78 24.198 391.217 9.22zM247.06 153.937c-9.422-.058-18.308 1.46-25.78 4.625l-.095-.188c-10.542 4.937-20.434 11.78-29.156 20.5-35.073 35.074-39.537 88.93-13.436 128.813-4.858-12.255-7.025-25.792-5.28-39.97 2.61-21.226 13.892-43.415 35.842-64.687l13 13.407c-19.616 19.01-28.3 37.187-30.312 53.563-2.014 16.376 2.574 31.435 11.375 44.53 15.493 23.06 44.764 38.645 69.093 39.595 23.7-1.754 46.925-11.707 65.093-29.875 40.22-40.22 40.22-105.156 0-145.375-2.658-2.66-5.42-5.13-8.28-7.438 9.885 11.527 16.984 25.703 19.28 42.063 2.973 21.18-2.147 45.52-17.844 71.75l-16.062-9.594c14.027-23.44 17.7-43.222 15.406-59.562-2.293-16.34-10.578-29.69-22.47-40.063-16.347-14.26-39.644-21.967-60.373-22.093zM133.47 317.78c-50.013.115-67.71 4.92-116.345 55.283 66.358-2.98 34.08 106.974 107.47 126.156 3.573-48.6 22.248-86.363 58.468-155.626-23.81 15.56-44.668 34.515-60 63.687l-16.563-8.686c14.987-28.514 35.14-48.585 57.125-64.375-25.9 2.17-51.153 8.562-76.688 24.686l-9.968-15.78c22.406-14.15 44.986-21.59 67.28-25.282-3.718-.023-7.382-.07-10.78-.063z",fill:"currentcolor",fillOpacity:"1"})})})}},1451:function(t,e,s){"use strict";s.r(e);var n=s(80318),a=s(30266),i=s(809),o=s.n(i),r=s(67294),c=s(87046),l=s(627),d=s(33787),h=s(2908),u=s(38419),m=s(84463),f=s(54774),x=s(22528),v=s(27484),b=s.n(v),w=s(1646),j=s.n(w),g=s(84110),p=s.n(g),N=s(85893);b().extend(j()),b().extend(p()),e.default=function(t){var e=t.router,s=(0,c.ZP)().provider,i=(0,r.useState)(!1),v=i[0],w=i[1],j=(0,l.ZP)(),g=j.currentAdventurer,p=j.set_currentAdventurer,k=j.rNonce,y=(0,r.useState)(g.tokenID),$=y[0],M=y[1],H=(0,r.useState)(Number(null===g||void 0===g?void 0:g.inventory[9])||0),S=H[0],D=H[1],Z=(0,r.useState)(0),C=Z[0],V=Z[1],Y=(0,r.useState)(0),_=Y[0],I=Y[1],T=(0,r.useState)(),O=T[0],P=T[1],E=(0,r.useState)("1/?"),B=E[0],F=E[1];function z(){S>=x.Zj&&I(_+1)}function A(){_>0&&I(_-1)}function W(){var t=Math.floor(S/x.Zj);I(_+t)}function R(){return X.apply(this,arguments)}function X(){return(X=(0,a.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=_*x.Zj,!(_>0)){t.next=8;break}return t.next=4,(0,x.ou)({provider:s,summoner:null===g||void 0===g?void 0:g.tokenID,amount:e});case 4:g.inventory[9]=String(S),p(g),V(C+_),I(0);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,r.useEffect)((function(){(0,a.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,x.Ki)({provider:s});case 2:n=t.sent,b().duration(b().unix(null===n||void 0===n?void 0:n.toNumber()).diff(b()())).milliseconds()<1?e.replace("/festivals/raffle/results"):P(n);case 5:case"end":return t.stop()}}),t)})))()}),[]),(0,r.useEffect)((function(){(0,a.Z)(o().mark((function t(){var e,a,i,r,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return $!==g.tokenID&&(I(0),M(g.tokenID)),e=Number(null===g||void 0===g?void 0:g.inventory[9])||0,D(e-x.Zj*_),t.t0=V,t.next=6,(0,x.xW)({provider:s,summoner:g.tokenID});case 6:return t.t1=t.sent.toNumber(),(0,t.t0)(t.t1),t.prev=8,t.next=11,(0,x.YR)({provider:s,summoner:g.tokenID,plusTickets:_});case 11:a=t.sent,i=(0,n.Z)(a,2),r=i[0],c=i[1],r.eq(0)?F("1/?"):F("1/".concat(Math.round(c.div(r).toNumber()))),t.next=21;break;case 18:t.prev=18,t.t2=t.catch(8),console.log("error",t.t2);case 21:case"end":return t.stop()}}),t,null,[[8,18]])})))()}),[k,g,_,$]),(0,N.jsx)("section",{className:"max-w-full",children:(0,N.jsxs)("div",{className:"max-w-prose w-full relative mt-8 mx-auto px-3 flex flex-col items-center",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{onClick:function(){return e.back()},className:"text-black dark:text-white text-megaxs absolute left-4 top-2 hover:underline cursor-pointer",children:"< Back"}),(0,N.jsx)("h1",{className:"text-black dark:text-white text-base text-2xl",children:"CANDY RAFFLE"}),(0,N.jsx)("div",{className:"text-black dark:text-white text-xxs absolute right-4 top-2 flex flex-row items-center"})]}),(0,N.jsxs)("p",{className:"mt-12 text-black dark:text-white text-base text-center",children:["What's the one thing every adventurer wants this holiday season? Buy some tickets and find out. ",(0,N.jsxs)("span",{className:"text-lg text-items-common",children:["Tickets are ",x.Zj," candies each!"]})," ",x.gz," ","winning tickets will be drawn in"]}),(0,N.jsxs)("p",{className:"mt-8 text-2xl",children:["~ ",b().duration(b().unix(null===O||void 0===O?void 0:O.toNumber()).diff(b()())).format("DD[d] HH[h] mm[m]")," ","~"]}),(0,N.jsxs)("div",{className:"mt-16 flex flex-row",children:[(0,N.jsx)(h.Z,{width:240,height:240,onClick:function(){return w(!0)},adventurer:g}),(0,N.jsx)(f.ZP,{isOpen:v,onClose:function(){return w(!1)},onSelect:function(t){return p(t)},options:{exclusions:[g.tokenID]}}),(0,N.jsx)("div",{className:"ml-12 flex flex-col justify-evenly",children:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"w-96 flex flex-row items-center justify-between",children:[(0,N.jsx)("div",{children:"Candies"}),(0,N.jsxs)("div",{className:"flex flex-row items-center text-2xl",children:[S," ",(0,N.jsx)(d.Z,{className:"ml-4",width:48,height:48})]})]}),(0,N.jsxs)("div",{className:"my-4 w-96 flex flex-row items-center justify-between",children:[(0,N.jsx)("div",{children:"Odds"}),(0,N.jsx)("div",{className:"flex flex-row items-center",children:B})]}),(0,N.jsxs)("div",{className:"my-2 w-96 flex flex-row items-center justify-between",children:[(0,N.jsx)("div",{children:"Tickets"}),(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsx)(m.Z,{className:"bg-gray-principal hover:bg-white focus:bg-white dark:bg-dark-400 dark:hover:bg-dark-600 dark:focus:bg-dark-600",backgroundColor:"bg-gray-principal dark:bg-dark-400",value:C+_,onIncrement:z,onDecrement:A}),(0,N.jsx)("div",{onClick:W,className:"absolute right-0 -bottom-6 text-xs cursor-pointer underline",children:"max"})]})]}),(0,N.jsx)(u.Z,{onClick:R,disabled:_<1,className:"mt-8 button-regular",disabledClassName:"mt-8 button-regular-disabled",backgroundColor:"bg-gray-principal dark:bg-dark-400",children:(0,N.jsx)("span",{className:"text-lg",children:"Buy Tickets"})})]})})]}),g.level>3&&(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"mt-24 flex flex-col items-center text-center",children:[(0,N.jsx)("h2",{className:"text-xl",children:"More ways to get tickets"}),(0,N.jsx)(u.Z,{onClick:function(){return e.push("/festivals/raffle/sacrifice")},className:"my-8 button-bloody",borderStyle:"bg-blood-600",backgroundColor:"bg-gray-principal dark:bg-dark-400",children:(0,N.jsx)("div",{className:"text-lg",children:"Sacrifice ".concat(g.name||g.tokenID)})}),(0,N.jsxs)("p",{className:"mb-4 text-sm",children:["The raffle committee has a special offer for you: ",(0,N.jsx)("span",{className:"text-lg text-blood-400",children:"Blood Sacrifice!"}),"\xa0","Sacrifice your summoner for ",(0,N.jsxs)("span",{className:"text-lg text-blood-400",children:[x.bY," candies"]})," ","and give them to another member of your party.","Then trade those for ",(0,N.jsxs)("span",{className:"text-lg text-blood-400",children:[x.bY/x.Zj," tickets"]})," ","!"]})]})})]})})}},7162:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/festivals/raffle",function(){return s(1451)}])}},function(t){t.O(0,[559,774,888,179],(function(){return e=7162,t(t.s=e);var e}));var e=t.O();_N_E=e}]);